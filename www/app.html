{{#def.Header}}
<div class="uk-overflow-container">
    <h2>App - {{=it.app.name}}</h2>
    {{?it.message}}
    <div class="uk-alert uk-alert-success">
        {{=it.message}}
    </div>
    {{?}}
    <form class="uk-form uk-form-horizontal">
        <div class="uk-form-row">
            <label class="uk-form-label" for="name">name:</label>
            {{=it.app.name}}
        </div>
        <div class="uk-form-row">
            <label class="uk-form-label" for="description">description:</label>
            {{=it.app.description}}
        </div>
        {{?it.app.url}}
        <div class="uk-form-row">
            <label class="uk-form-label" for="url">url:</label>
            <a href="{{!it.app.url}}" target="{{!it.app.name}}">{{=it.app.url}}</a>
        </div>
        {{?}}
        <div class="uk-form-row">
            <label class="uk-form-label" for="labels">labels:</label>
            {{~it.labels :label}}
            {{=label.name}}={{=label.value}}:
            {{~it.nodes :node}} 
            {{? node.role == "worker" || (node.role == "master" && label.master)}}
            <label
                ><input 
                    type="checkbox" id='{{!label.name}}-{{!node.name}}' value='{{!label.value}}'
                    {{? label.nodes.indexOf(node.name) > -1 }}checked{{?}}
                    OnClick="DRApp.current.controller.app_label('{{!label.name}}','{{!node.name}}');"
                > {{=node.name}}
            </label>
            {{?}}
            {{~}}
            <br/>
            {{~}}
        </div>
        {{?it.app.action}}
        <div class="uk-form-row">
            <label class="uk-form-label" for="action">action:</label>
            {{=it.app.action}}
        </div>
        {{?}}
        <div class="uk-form-row">
            <label class="uk-form-label" for="status">status:</label>
            {{=it.app.status}}
            {{?it.app.status == "Downloaded" && it.app.action != "Install"}}
                <button type="button" onClick="DRApp.current.controller.app_action('{{!it.app.name}}', 'Install');" class="uk-button uk-button-primary">
                    Install
                </button>
            {{?}}
            {{?it.app.status != "Installed"}}
                <button type="button" onClick="DRApp.current.controller.app_delete('{{!it.app.name}}');" class="uk-button uk-button-primary">
                    Delete
                </button>
            {{?? it.app.action != "Uninstall" }}
                {{?it.app.url}}
                    <a class="uk-button uk-button-primary" href="{{!it.app.url}}" target="{{!it.app.name}}">Open</a>
                {{?}}
                <button type="button" onClick="DRApp.current.controller.app_action('{{!it.app.name}}', 'Uninstall');" class="uk-button uk-button-primary">
                    Uninstall
                </button>
            {{?}}
        </div>
        {{?it.app.error}}
        <div class="uk-form-row">
            <label class="uk-form-label" for="error">error:</label>
            <pre>
                {{=it.app.error.join("\n")}}
            </pre>
        </div>
        {{?}}
        {{?it.app.publications}}
        <div class="uk-form-row">
            <label class="uk-form-label" for="publications">publications:</label>
            <pre>{{=DRApp.YAML(it.app.publications)}}</pre>
        </div>
        {{?}}
        {{?it.app.subscriptions}}
        <div class="uk-form-row">
            <label class="uk-form-label" for="subscriptions">subscriptions:</label>
            <pre>{{=DRApp.YAML(it.app.subscriptions)}}</pre>
        </div>
        {{?}}
        {{?it.app.resources}}
        <div class="uk-form-row">
            <label class="uk-form-label" for="resources">resources:</label>
            <pre>{{=DRApp.YAML(it.app.resources)}}</pre>
        </div>
        {{?}}
        {{?it.app.publish}}
        <div class="uk-form-row">
            <label class="uk-form-label" for="publish">publish:</label>
            <pre>{{=DRApp.YAML(it.app.publish)}}</pre>
        </div>
        {{?}}
        {{?it.app.subscribe}}
        <div class="uk-form-row">
            <label class="uk-form-label" for="subscribe">subscribe:</label>
            <pre>{{=DRApp.YAML(it.app.subscribe)}}</pre>
        </div>
        {{?}}
    </form>
</div>
{{#def.Footer}}